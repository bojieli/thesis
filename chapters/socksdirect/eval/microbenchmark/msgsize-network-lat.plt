set terminal pdf
set output "msgsize-network-lat.pdf"
set lmargin 13
set style line 1 pt 8 lc rgb "#e41a1c" linewidth 1.5 ps 1.0
set style line 2 pt 4 lc rgb "#377eb8" linewidth 1.5 ps 1.0
set style line 3 pt 6 lc rgb "#4daf4a" linewidth 1.5 ps 1.0
set style line 4 pt 12 lc rgb "#984ea3" linewidth 2 dt 2 ps 1.0
set style line 5 pt 10 lc rgb "#ff7f00" linewidth 1.5 ps 1.0
set style line 6 pt 14 lc rgb "#ffff33" linewidth 1.5 ps 1.0
set style line 7 pt 13 lc rgb "#a65628" linewidth 1.5 ps 1.0
set style line 8 pt 13 lc rgb "#f781bf" linewidth 1.5 ps 1.0
set xlabel "Message size (Bytes)"  font "Arial, 24"
set ylabel "Latency ({/Symbol m}s, log scale)" font "Arial, 24" offset graph -0.03, 0
set xtics ("8B" 8, "64B" 64, "512B" 512, "4K" 4096, "32K" 32768, "256K" 262144, "1M" 1048576) font "Arial, 24"
set ytics font "Arial, 24"
set key inside reverse left top font "Arial, 20"
set logscale y 10 
set logscale x 2

$linux << EOD
8 30.4059 28.7590 36.8800
16 23.6072 21.5470 27.717
32 24.3398 21.7650 57.947
64 30.4908 26.6370 37.336
128 30.8849 28.1530 38.391
256 23.4958 21.0810 32.462
512 24.1660 21.7380 29.173
1024 33.7691 30.1620 44.641
2048 41.5765 25.2090 55.504
4096 30.8637 20.9080 61.648
8192 45.3526 30.0550 63.443
16384 54.0435 46.0450 68.841
32768 83.4563 76.2480 113.254
65536 110.7810 98.7000 161.062
131072 186.7830 144.7430 236.274
262144 339.8730 262.5840 422.398
524288 506.6340 434.6310 603.676
1048576 730.0770 656.5630 868.885
EOD

$libvma << EOD
8 11.7791 10.1390 24.333
16 11.4879 10.569 23.328
32 11.0866 9.937 23.573
64 11.616 10.732 13.231
128 11.2279 10.855 12.014
256 13.5389 11.333 25.105
512 11.7223 10.781 13.638
1024 12.6471 11.818 24.916
2048 16.8054 14.325 34.819
4096 23.0248 16.261 39.550
8192 22.0221 19.604 43.712
16384 33.5005 27.320 68.538
32768 49.0956 42.622 93.650
65536 84.875 76.539 114.181
131072 173.641 140.883 247.109
262144 326.702 276.510 421.875
524288 560.381 536.118 635.079
1048576 1080.530 1005.273 1201.292
EOD

$RDMA << EOD
8	2.2
16	2.18
32	2.78
64	2.8
128	2.84
256	2.88
512	3
1024	3.26
2048	3.76
4096	5.02
8192	6.92
16384	10.28
32768	16.48
65536	27.18
131072	49.54
262144	87.62
524288	162.68
1048576	327.12
EOD

$libsd << EOD
8	1.7053	1.603	1.805
16	1.7906	1.752	1.925
32	1.9992	1.833	2.222
64	2.491	2.44	2.615
128	2.6034	2.551	2.729
256	2.65	2.588	2.734
512	2.8079	2.76	2.916
1024	3.2079	3.134	3.307
2048	3.9775	3.911	4.064
4096	5.5637	5.471	5.67
8192	11.7415	11.626	12.15
16384	16.9248	14.06	19.539
32768	21.9532	20.158	24.845
65536	31.8033	31.118	34.701
131072	60.1095	59.282	67.156
262144	97.6657	96.317	103.932
524288	179.112	176.381	188.98
1048576	346.021	343.097	357.664
EOD

$rsocket << EOD
8 3.48244 3.088 9.639
16 3.67042 3.257 10.599
32 3.48673 3.238 4.968
64 4.0848 3.801 8.779
128 4.89603 4.482 9.086
256 5.09606 4.324 9.646
512 5.5199 4.543 10.176
1024 7.78394 4.974 75.237
2048 14.7267 7.912 23.489
4096 23.3797 12.799 27.309
8192 26.3382 24.834 32.003
16384 35.2397 33.237 43.638
32768 57.6883 50.387 63.319
65536 70.3724 36.493 120.217
131072 68.6721 65.332 78.724
262144 123.204 117.559 137.762
524288 230.4 210.083 277.199
1048576 479.94 413.862 584.151
EOD

plot "$libsd" title "SocksDirect" with yerrorlines linestyle 1,\
"$linux" title "Linux" with yerrorlines linestyle 2,\
"$libvma" title "LibVMA" with yerrorlines linestyle 3,\
"$rsocket" title "RSocket" with yerrorlines linestyle 5,\
"$RDMA" title "RDMA" with linespoints linestyle 4
